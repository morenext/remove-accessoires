(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},15:function(e,t,n){e.exports=n(27)},21:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),o=n(10),a=n.n(o),c=(n(21),n(3)),i=n(4),u=n(7),l=n(5),d=n(6),h=n(11),f=n.n(h),b=(n(23),n(13)),g=n(14),m=n(2),p=n.n(m),v=n(8),k=n(1),y=n(12),w=n.n(y),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={hue:w()(),buttonLabel:"Discover",buttonHandler:n.discover.bind(Object(k.a)(Object(k.a)(n))),message:"Make sure you are connected to the same network as the bridge."},n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"discover",value:function(){var e=this;this.state.hue.discover().then(function(t){0===t.length?(e.setState({message:"No bridges found."}),console.log("No bridges found. :(")):e.setState({buttonLabel:"Connect",buttonHandler:e.connect.bind(e),message:"".concat(t.length," bridges found, press link button and click connect.")}),e.setState({bridges:t.map(function(t){return e.state.hue.bridge(t.internalipaddress)})})}).catch(function(e){console.log("Error finding bridges",e)})}},{key:"firstTrue",value:function(e){var t=e.map(function(e){return new Promise(function(t,n){return e.then(function(e){return e&&t(!0)},n)})});return t.push(Promise.all(e).then(function(){return!1})),Promise.race(t)}},{key:"connect",value:function(){var e=Object(v.a)(p.a.mark(function e(){var t,n=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.bridges,this.state.bridges){e.next=3;break}return e.abrupt("return");case 3:return this.setState({message:"Trying to link to a bridge."}),e.next=6,this.firstTrue(t.map(function(e){return n.link(e)}));case 6:this.state.user?this.setState({buttonLabel:"Remove Accessories",buttonHandler:this.remove.bind(this),message:"Successfully linked"}):this.setState({message:"Link button is not pressed, please try again."});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"link",value:function(e){var t=this;return e.createUser("accessories-cleaner#testdevice").then(function(n){if(!n[0].error){var r=n[0].success.username;return console.log("New username:",r),t.setState({user:e.user(r)}),!0}},function(e){console.log("Error:",e)})}},{key:"responseFilter",value:function(e,t){return Object.keys(e).reduce(function(n,r){var s=e[r];return t(s)&&n.push(Object(g.a)({id:r},s)),n},[])}},{key:"remove",value:function(){var e=Object(v.a)(p.a.mark(function e(){var t,n,r,s,o=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.user,console.log("Removing the accessories"),e.next=4,t.getSensors().then(function(e){return o.responseFilter(e,function(e){return"RWL022"===e.modelid})});case 4:return n=e.sent,e.next=7,t.getResourceLinks().then(function(e){return n.reduce(function(t,n){return t.push.apply(t,Object(b.a)(o.responseFilter(e,function(e){return e.links.includes("/sensors/".concat(n.id))}))),t},[])});case 7:(r=e.sent).forEach(function(e){return t.deleteResourceLink(e.id)}),n.forEach(function(e){return t.deleteSensor(e.id)}),s=0===n.length?"No Accessories found on this bridge.":"Successfully removed ".concat(n.length," Accessories and ").concat(r.length," formulas."),this.setState({buttonLabel:"Done",message:s}),console.log("Removed resources:"),console.log("Sensors:"),console.log(JSON.stringify(n,null,2)),console.log("Resource links:"),console.log(JSON.stringify(r,null,2));case 17:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("p",null,this.state.message),s.a.createElement("button",{onClick:this.state.buttonHandler},this.state.buttonLabel))}}]),t}(r.Component),j=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("img",{src:f.a,className:"App-logo",alt:"logo"}),s.a.createElement(O,null)))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(s.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[15,2,1]]]);
//# sourceMappingURL=main.6f071522.chunk.js.map